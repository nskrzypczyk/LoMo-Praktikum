\input{latex-templates/head.tex}

% Metainformationen
\title{Evaluation -- Praktikum 2}
\author{Die Lokalisatoren}

\ihead{}
\chead{}
\ohead{}
\ifoot{}
\cfoot{\pagemark}
\ofoot{}

\input{latex-templates/ownCommands.tex}

\setlength{\parskip}{0em}
\setlength{\parindent}{0em}
\renewcommand{\baselinestretch}{1.5}

\begin{document}

\docheader

\section{Wie und wo wir messen}

Auf jede Route werden drei verschiedene Verfahren angewandt: 
\begin{itemize}
	\item FusedLocationProvider - \code{PRIORITY\_HIGH\_ACCURACY} (nachfolgend "`FLP\_HIGH"' genannt)
	\item FusedLocationProvider - \code{PRIORITY\_LOW\_POWER} (nachfolgend "`FLP\_LOW"' genannt)
	\item LocationManager - \code{GPS\_PROVIDER} (nachfolgend "`LM\_GPS"' genannt)
\end{itemize}

Dabei entschieden wir uns für FLP\_HIGH, um die genaueste Positionierung zu erhalten. FLP\_LOW verzichte größtenteils auf GPS- und Wi-Fi-Signale und ermittle die Position über Cell Tower (laut Google). LM\_GPS wurde von uns ausgewählt, um die Genauigkeit von GPS zu der höchstmöglichen Genauigkeit und "`Cell Tower-Genauigkeit"' einzuschätzen bzgl. in Relation zu setzen. \\

Zur Überprüfung der einzelnen Verfahren wurden zwei Routen definiert (Abbildung \ref{fig:routen}). Das Abgehen einer Route folgt dabei folgendem Schema: An Position des ersten Flags wird der "`Start"'-Button betätigt. Sobald die erste Positionierung erfolgte, wird der "`Timestamp"'-Button betätigt und Route in Schritttempo abgegangen. Jetzt wird der "`Timestamp"'-Button immer betätigt, wenn ein Flag der "`Groundtruth"' passiert wird. Am Ende der Route wird abschließend der "`Timestamp"'- und "`Stop"'-Button betätigt.

\begin{figure}[h!]
	\centering
	\begin{subfigure}[b]{.64\textwidth}
		\centering
        \includegraphics[height=5.2cm]{route1}
        \caption{Route  1 (Outdoors)}
        \label{fig:route1}
    \end{subfigure}
    \begin{subfigure}[b]{.35\textwidth}
    	\centering
        \includegraphics[height=5.2cm]{route2}
        \caption{Route 2 - (Indoors)}
        \label{fig:route2}
    \end{subfigure}
    \caption{Die "`Groundtrouth"' der Routen mit den einzelnen Flags}
    \label{fig:routen}
\end{figure}

\section{Erwartungen}

Wir erwarten, dass die Ergebnisse von FLP\_HIGH genauer sind als die Ergebnisse der übrigen, verwendeten Verfahren. LM\_GPS sollte ähnliche Fehler wie FLP\_LOW ergeben. 

\subsection{Outdoors}


% - recht genau high
% - low sollte am ungenausten sein
% - GPS iwo dazwischen (20m - 30m)
%


\subsection{Indoors}

% - gps nicht zu gebrauchen, ggf. bekommt man nicht mal pos
% - flp high und eventuell low genau, aber ungenauer als outdoors
%   oder vielleicht sogar ähnliche genauigkeit wie outdorrs wegen guter 

% TODO: Erwartungen Outdoor vs. Indoor darstellen
	
\section{Auswertung}	

Erstaunlicher Weise -- und entgegen unserer Erwartungen -- liefern FLP\_HIGH und FLP\_LOW nahezu gleiche Daten bzgl. der Genauigkeit. LM\_GPS scheint immer, einen deutlich größeren Fehler auszugeben, unabhängig von der Umgebung. \\

\textit{Anmerkung}: Die nachfolgenden Daten wurden mit einem Samsung Galaxy S8 erhoben.

\subsection{Technische Umsetzung}

In einem idealen System unter idealen Bedingungen erhält unsere App alle drei Sekunden eine Position vom Betriebssystem -- wie gewünscht. Dann kann zwischen den Punkten der Groundtrouth linear interpoliert werden, um die Genauigkeit zu ermitteln. Der Fehler ergibt sich durch die Distanz der gemessenen Position zur entsprechenden, interpolierten Position der Groundtrouth. \\

Tatsächlich kommt es jedoch durch diverse Umstände dazu, dass die App nicht genau alle drei Sekunden eine Position aus dem Betriebssystem erhält. Meist entstehen Datenreihen, die entweder zu groß oder zu klein sind. Daher müssen die erhobenen Daten zunächst bereinigt werden: Sind die Datenreihen zu groß, so werden die "`überflüssigen"' Positionen gelöscht. Zusätzlich kann es vorkommen, dass die Positionen zu dicht bei einander liegen (zeitlich). Auch diese Daten werden aussortiert. Die Bereinigung der Daten findet ausschließlich im Modus "Clean Data" statt. \\

Darüber hinaus kann der Fall eintreten, dass die Listen der gemessenen Daten kürzer ist als die der interpolierten Werte. Dann müsste der Mechanismus zur Datenauswertung in einen anderen Modus schalten. Um die tatsächliche Genauigkeit zu bestimmen -- in diesem Fall -- müssten die interpolierten Positionen mit den gemessenen Positionen gematcht werden (z.B. über Timestamps), anstatt über die Listen parallel zu iterieren.

\subsection{Outdoors}

Wie bereits erwähnt, liefern die gewählten Verfahren des Fused Location Providers ähnliche Werte. An dieser Stelle kann man sogar soweit gehen und sagen, dass FLP\_HIGH und FLP\_LOW gleiche Daten hinsichtlich der Genauigkeit liefern. Median und arithmetisches Mittel liegen nur marginal auseinander und auch die Standardabweichungen trennen nur rund 40cm, was bei Längen von 40m nicht der Rede wert ist. Bemerkenswert ist, wie ungenau selbst die höchste Genauigkeit ist. Hier entstehen Fehler von $120,7$m (95\%-Konfidenzniveau). Dieser Fehler könnte daraus resultieren, dass der Fused Location Provider Outdoors größtenteils nur auf die GPS-Daten zurückgreifen kann.

\renewcommand{\arraystretch}{1.2}
\begin{table}[h!]
	\centering
	\caption{Ergebnisse Route 1 -- Outdoors (Abbildung \ref{fig:route1})}
	\begin{tabular}{|l|l|l|l|}
	\hline
	Fehler (in Meter) & FLP\_HIGH & FLP\_LOW & LM\_GPS \\
	\hline
	\multicolumn{4}{|c|}{\textit{Lagemaße}}\\
	\hline
	Median & $7,615$ & $8,957$ & $32,996$ \\
	Konfidenzlevel 95\% & $18,699$ & $11,949$ & $50,564$ \\
	Arithm. Mittel & $10,007$ & $8,791$ & $28,682$ \\
	\hline
	\multicolumn{4}{|c|}{\textit{Streumaße}}\\
	\hline
	Standardabweichung & $4,627$ & $2,16$ & $16,546$ \\
	Quartilsabstand & $6,891$ & $1,734$ & $32,941$ \\
	\hline
	\end{tabular}
\end{table}

\subsection{Indoors}

Überraschender Weise sind die Daten der beiden gewählten Verfahren des Fused Location Provider Indoors deutlich genauer als Outdoors. Die Positionen des LocationManagers sind sehr ungenau, wie erwartet. Außerdem ist die Streuung des Fused Location Providers deutlich niedriger als auf der ersten Route.

\begin{table}[h!]
	\centering
	\caption{Ergebnisse Route 2 -- Indoors (Abbildung \ref{fig:route2})}
	\begin{tabular}{|l|l|l|l|}
	\hline
	Fehler (in Meter) & FLP\_HIGH & FLP\_LOW & LM\_GPS \\
	\hline
	\multicolumn{4}{|c|}{\textit{Lagemaße}}\\
	\hline
	Median & $15,962$ & $15,597$ & $85,378$ \\
	Konfidenzlevel 95\% & $23,583$ & $36,193$ & $106,079$ \\
	Arithm. Mittel & $14,911$ & $16,102$ & $62,419$ \\
	\hline
	\multicolumn{4}{|c|}{\textit{Streumaße}}\\
	\hline
	Standardabweichung & $7,292$ & $10,682$ & $43,719$ \\
	Quartilsabstand & $10,573$ & $16,456$ & $79,299$ \\
	\hline
	\end{tabular}
\end{table}

\section{Screenshots}

\begin{figure}[h!]
    \centering
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{screenshot_route1}
        \caption{Auswertung Route 1}
        \label{fig:auswertung1}
    \end{subfigure}
    ~ % Abstand
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{screenshot_route2}
        \caption{Auswertung Route 2}
        \label{fig:auswertung2}
    \end{subfigure}
    \caption{Auswertung der Routen}
    \label{fig:auswertung}
\end{figure}

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.8\textwidth]{screenshot_routen_map}
    \caption{Groundtruth und erhobene Daten}
    \label{fig:map}
\end{figure}
	
\end{document}